<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deepgram TTS Demo - SY0-701 Quiz</title>
    <link rel="stylesheet" href="tts-styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .demo-section {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .dark-mode .demo-section {
            background: #333;
            color: #fff;
        }
        
        .test-question {
            font-size: 18px;
            margin: 15px 0;
            padding: 15px;
            border-left: 4px solid #00bcd4;
            background: white;
        }
        
        .dark-mode .test-question {
            background: #444;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
            margin: 15px 0;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background: #00bcd4;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        
        button:hover {
            background: #0097a7;
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
        
        .status.info {
            background: #e0f7fa;
            color: #006064;
        }
        
        .status.error {
            background: #ffebee;
            color: #b71c1c;
        }
        
        .dark-mode .status.info {
            background: #006064;
            color: #e0f7fa;
        }
        
        .dark-mode .status.error {
            background: #b71c1c;
            color: #ffebee;
        }
        
        h1, h2 {
            color: #333;
        }
        
        .dark-mode h1, .dark-mode h2 {
            color: #fff;
        }
        
        .feature-list {
            list-style-type: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 5px 0;
        }
        
        .feature-list li::before {
            content: "üåê ";
            color: #00bcd4;
            font-weight: bold;
        }
        
        .api-info {
            background: #fff3e0;
            border: 1px solid #ff9800;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .dark-mode .api-info {
            background: #ff9800;
            color: #fff3e0;
        }
        
        .voice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .voice-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
        }
        
        .dark-mode .voice-card {
            background: #444;
            border-color: #666;
            color: #fff;
        }
        
        .voice-card.male {
            border-color: #2196f3;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .voice-details {
            background: #f0f8ff;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
            font-size: 12px;
        }
        
        .dark-mode .voice-details {
            background: #1a1a2e;
        }
    </style>
</head>
<body>
    <h1>Deepgram TTS with Word Highlighting - Demo</h1>
    
    <div class="api-info">
        <strong>‚ÑπÔ∏è Demo Notice:</strong> This demo requires the Deepgram API key to be configured. 
        In the deployed version, the API key is securely injected via GitHub Actions.
    </div>
    
    <div class="controls">
        <button onclick="toggleTheme()">Toggle Dark Mode</button>
        <button onclick="showVoiceInfo()">Voice Info</button>
        <button onclick="testLongText()">Test Long Text</button>
        <button onclick="testOdysseusVoice()">Test Odysseus Voice</button>
    </div>

    <div class="demo-section">
        <h2>Deepgram TTS Features:</h2>
        <ul class="feature-list">
            <li>High-quality Odysseus neural voice (Aura 2.0)</li>
            <li>Real-time word highlighting with estimated timing</li>
            <li>Professional male voice optimized for educational content</li>
            <li>Premium audio quality at 24kHz</li>
            <li>Play/pause/stop controls with visual feedback</li>
            <li>Loading states and error handling</li>
            <li>Dark mode support for all highlighting</li>
            <li>Mobile-responsive design</li>
            <li>Teal highlighting theme for Deepgram</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>Voice Profile:</h2>
        <div class="voice-grid">
            <div class="voice-card male">
                <strong>Odysseus</strong><br>
                Male ‚Ä¢ American English<br>
                <div class="voice-details">
                    <strong>Model:</strong> aura-2-odysseus-en<br>
                    <strong>Characteristics:</strong> Masculine, calm, smooth, comfortable, professional<br>
                    <strong>Use Case:</strong> Perfect for educational content and professional narration
                </div>
            </div>
        </div>
    </div>

    <div class="demo-section">
        <h2>Test Sample Questions:</h2>
        
        <div class="test-question" id="question1">
            A security administrator implements a network segmentation strategy to isolate critical systems from general user networks. This approach primarily addresses which aspect of the CIA triad?
        </div>
        
        <div class="tts-controls">
            <button id="play-btn-1">üîä Read Question 1</button>
            <select id="voice-select" class="tts-voice-select">
                <option value="">Loading voices...</option>
            </select>
        </div>

        <div class="test-question" id="question2">
            An organization wants to ensure that employees can only access company resources from managed devices. Which identity and access management concept would be most appropriate to implement?
        </div>
        
        <div class="tts-controls">
            <button id="play-btn-2">üîä Read Question 2</button>
        </div>

        <div class="test-question" id="question3">
            A company's incident response team discovers that an attacker has been using legitimate system administration tools to move laterally through the network. This technique is an example of which attack method?
        </div>
        
        <div class="tts-controls">
            <button id="play-btn-3">üîä Read Question 3</button>
        </div>
    </div>

    <div class="demo-section">
        <h2>TTS Status:</h2>
        <div class="status info" id="status">
            Initializing Deepgram TTS system...
        </div>
    </div>

    <script src="deepgram-tts.js"></script>
    <script>
        let deepgramTTS1, deepgramTTS2, deepgramTTS3;
        let isDarkMode = false;

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize TTS for each test question
            const question1 = document.getElementById('question1');
            const question2 = document.getElementById('question2');
            const question3 = document.getElementById('question3');
            const playBtn1 = document.getElementById('play-btn-1');
            const playBtn2 = document.getElementById('play-btn-2');
            const playBtn3 = document.getElementById('play-btn-3');
            const voiceSelect = document.getElementById('voice-select');
            const status = document.getElementById('status');

            // Create Deepgram TTS instances
            deepgramTTS1 = new DeepgramTTS(question1, playBtn1, voiceSelect);
            deepgramTTS2 = new DeepgramTTS(question2, playBtn2, null);
            deepgramTTS3 = new DeepgramTTS(question3, playBtn3, null);

            // Initialize all TTS instances
            setTimeout(() => {
                deepgramTTS1.init();
                deepgramTTS2.init();
                deepgramTTS3.init();
                
                updateStatus();
            }, 200);

            // Set up button event listeners
            playBtn1.addEventListener('click', () => {
                stopOtherReaders(deepgramTTS1);
            });

            playBtn2.addEventListener('click', () => {
                stopOtherReaders(deepgramTTS2);
            });

            playBtn3.addEventListener('click', () => {
                stopOtherReaders(deepgramTTS3);
            });
        });

        function stopOtherReaders(except) {
            [deepgramTTS1, deepgramTTS2, deepgramTTS3].forEach(reader => {
                if (reader && reader !== except) {
                    reader.stop();
                }
            });
        }

        function updateStatus() {
            const status = document.getElementById('status');
            if (!deepgramTTS1 || !deepgramTTS1.isSupported()) {
                status.textContent = 'Deepgram TTS not supported';
                status.className = 'status error';
                return;
            }

            const voiceInfo = deepgramTTS1.getVoiceInfo();
            status.innerHTML = `
                Deepgram TTS System Ready<br>
                Voice: ${voiceInfo.currentVoice} (${voiceInfo.voiceModel})<br>
                Provider: ${voiceInfo.provider}<br>
                Description: ${voiceInfo.voiceDescription}<br>
                Status: ${voiceInfo.apiStatus}
            `;
        }

        function showVoiceInfo() {
            updateStatus();
            
            if (deepgramTTS1) {
                const voiceInfo = deepgramTTS1.getVoiceInfo();
                console.log('Deepgram Voice Information:', voiceInfo);
                
                alert(`Deepgram Voice Information:
Voice: ${voiceInfo.currentVoice}
Model: ${voiceInfo.voiceModel}
Provider: ${voiceInfo.provider}
Description: ${voiceInfo.voiceDescription}
API Status: ${voiceInfo.apiStatus}

Check the console for detailed information.`);
            }
        }

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
        }

        function testLongText() {
            const longText = `This is a comprehensive test of the Deepgram Text-to-Speech system using the Odysseus voice model. 
            The Odysseus voice provides high-quality neural voice synthesis with a masculine, calm, smooth, comfortable, and professional tone. 
            This implementation includes real-time word highlighting that estimates timing based on speech duration, 
            providing an enhanced learning experience for Security Plus certification preparation. 
            The professional quality of the Odysseus voice makes it ideal for educational content, 
            ensuring clear pronunciation and comfortable listening for extended study sessions.`;
            
            stopOtherReaders(deepgramTTS1);
            if (deepgramTTS1) {
                deepgramTTS1.play(longText);
            }
        }

        function testOdysseusVoice() {
            const testText = `Hello, I am Odysseus, your professional narrator for the Security Plus certification quiz. 
            My voice is designed to be masculine, calm, smooth, comfortable, and professional, 
            making your study experience both engaging and effective. 
            Let's begin your cybersecurity learning journey together.`;
            
            stopOtherReaders(deepgramTTS1);
            if (deepgramTTS1) {
                deepgramTTS1.play(testText);
            }
        }
    </script>
</body>
</html>
